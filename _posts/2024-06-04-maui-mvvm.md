---
layout: post
title: .NET MAUI MVVM 101
published: false
---

# Introducción ¿Qué es MVVM?

Aunque existe muchísima información valiosa en internet sobre el patrón de arquitectura MVVM, me gustaría proporcionar mi visión y definicición sobre él después de llevar trabajando mucho tiempo con él. Este patrón es independiente del framework que utilices para desarrollar tu frontal, por lo que esto que detallo a continuación es válido para aplicaciones en Xamarin Forms, WPF o .NET MAUI.

**MVVM**, Model-View-ViewModel, es un **patrón de arquitectura** que nos **facilita la separación de la logíca de negocio y de presentación** de una aplicación, permitiendo una mejor mantenibilidad, testeabilidad y escalibilidad de nuestro código.

## Componentes de MVVM y sus responsabilidades

  * **Model**
    * Es el componente que representa la "capa de datos" de nuestra aplicación.
    * Responsabilidades
      * Es el componente encargado de gestionar los datos de la aplicación a través de servicios externos, bases de datos, etc...
      * Es el componente encargado de definir las reglas de negocio y la lógica de validación.
      > Ojo! Este componente NO DEBE tener ninguna lógica relacionada con la interfaz de usuario.
  * **View**
    * Es el componente que respresenta la interfaz de usuario (UI) de nuestra aplicación.
    * Responsabilidades
      * Es el componente encargado de definir los diferentes elementos de la UI.
      * Es el componente encargado de mostrar datos al usuario y capturar las posibles interacciones del usuario, por ejemplo a través de hacer tap en botones o escribir texto.
      > Puede vincularse a los ViewModels a través de comandos y propiedades para manejar dichas interacciones.
  * **ViewModel**
    * Es el componente que actua de intermediario entre el Model y la View.
    * Es el componente que gestiona la lógica de presentación y maneja la comunicación entre la vista y el modelo.  
    * Responsabilidades
      * Es el componente que expone los datos del Model para que la View pueda utilizarlos/ consumirlos.
      * Es el componente que contiene la lógica de presentación tales como comandos y métodos que responden a acciones del usuario.
      * Es el componente que recoge datos del usuario desde la View y los pasa al Model.
      * Es el componente que maneja la lógica de navegación.
      > Implementará la interface INotifiyPropertyChanged o similar, es decir, implementará la notificación de cambios.

## Beneficios de usar MVVM

  * **Separación de responsabilidades**. Como he he comentado antes, facilita la sepación de la lógica de negocio de la de presentación.
  * **Testeabilidad.** Facilita la posibilidad de añadir test unitarios a nuestra lógica de negocio y de presentación.
  * **Reusabilidad.** Un mismo ViewModel puede utilizarse en diferentes Views ya que no deberían estar acoplados a la UI.
  * **Mantenibilidad.** Por todo lo anterior, hace que nuestro código sea más fácil de mantener y extender.

## ¿Cómo implementar MVVM en .NET MAUI?

La verdad, tenemos múltiples opciones para implementar MVVM, ya que como he comentado antes el punto fundamental es que nuestros ViewModels implementen la notificación de cambios. ¿Y esto como lo podemos consegir?

* Si vamos en crudo, simplemente tenemos que implementar la inferface **INotifyPropertyChanged**
* Si no vamos en crudo y nos apoyamos en algún framework o "kit de herramientas" tenemos que implementar en el caso de [CommunityToolkit.Mvvm](https://learn.microsoft.com/es-es/dotnet/communitytoolkit/mvvm/) la clase abstracta **ObservableObject** que a su vez implementa la interface **INotifyPropertyChanged** que hace que nuestros objetos puedan ser observables.
  ```csharp
  public abstract class ObservableObject : INotifyPropertyChanged, INotifyPropertyChanging
  ```
### Opción en crudo implementando la interface INotifyPropertyChanged

Para dotar de algo más de contexto, nuestra primera aplicación en .NET MAUI será una aplicación que consume una API, en concreto la de SpaceX y los diferentes lanzamientos al espacio que ha habido. 

> La aplicación tendrá una View principal, llamada LaunchesView en la que se mostrará una lista de lanzamientos y haciendo tap en cualquiera de ellos navegará al detalle de los mismos (LaunchDetailView).

Para este primer ejemplo vamos a implementar en nuestros ViewModels la interface INotifyPropertyChanged en crudo y vamos a evitar usar cualquier framework o "kit de herramientas".

## Enlaces de interés

| Info    | Enlace |
| -------- | ------- |
| Repo en GitHub de CommunityToolkit.Mvvm | https://github.com/CommunityToolkit/dotnet   |
